class e{constructor(e,t){this.tag=Array.isArray(e)?e:[e],this.handler=t}set(e,t,s=null){this.handler.set(e,t,s),this.append(e)}append(e){for(const t of this.tag){const s=this.handler.getTagItems(t);s.includes(e)||(s.push(e),this.handler.set(t,s))}}clear(){for(const e of this.tag){const t=this.handler.getTagItems(e);for(const e of t)this.handler.delete(e);this.handler.delete(e)}}}class t{constructor(e={}){this.type=e.type||"local",this.expire=e.expire||0,this.prefix=e.prefix||"",this.serialize=e.serialize||JSON.stringify,this.deserialize=e.deserialize||JSON.parse,this.storage=window[`${this.type}Storage`]}getKey(e){return this.prefix+e}set(e,t,s=null){const i={value:t,expire:s||0!==this.expire?Date.now()+1e3*(s||this.expire):0};try{return this.storage.setItem(this.getKey(e),this.serialize(i)),!0}catch(e){return!1}}has(e){return null!==this.storage.getItem(this.getKey(e))}get(e,t=null){const s=this.storage.getItem(this.getKey(e));if(s){const t=this.deserialize(s);if(0===t.expire||t.expire>=Date.now())return t.value;this.delete(e)}return t}delete(e){this.storage.removeItem(this.getKey(e))}clear(){this.storage.clear()}remember(e,t,s=null){const i=this.get(e);if(null!==i)return i;if("function"==typeof t){const i=t();return this.set(e,i,s),i}return this.set(e,t,s),t}inc(e,t=1){const s=this.get(e,0);"number"==typeof s&&this.set(e,s+t)}tag(t){return new e(t,this)}dec(e,t=1){this.inc(e,-t)}pull(e){let t=this.get(e);return this.delete(e),t}push(e,t){const s=this.get(e,[]);Array.isArray(s)&&(s.push(t),this.set(e,s))}store(e){return new this.constructor({type:e,expire:this.expire,prefix:this.prefix,serialize:this.serialize,deserialize:this.deserialize})}getTagItems(e){return this.get(e,[])}}export{t as default};
//# sourceMappingURL=storagetify.esm.min.js.map
